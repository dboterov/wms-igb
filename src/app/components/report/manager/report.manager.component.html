<!--Modal procesando-->
<div id="modal_transfer_process" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <div class="progress">
                    <div class="progress-bar progress-bar-info progress-bar-striped active" role="progressbar"
                        aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                        <span class="sr-only">Procesando transferencia</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<nav class="topnav visible-md visible-lg">
    <a class="topnav-logo"><img src="/assets/images/{{logo}}" /></a>
    <h4 class="title">DASHBOARD</h4>
</nav>
<nav class="topnav visible-xs visible-sm">
    <a class="topnav-logo"><img src="/assets/images/{{logo}}" /></a>
    <h4 class="title">DASHBOARD</h4>
</nav>
<script src="assets/js/chart.min.js"></script>
<br />

<!--Gerencia-->
<div class="gerencia">
    <div class="container">
        <div class="row">
            <div style="position: relative; margin-top: 40px;">
                <div class="col-xs-12 col-md-10 col-md-offset-1">
                    <div>
                        <!-- Nav tabs -->
                        <ul class="nav nav-tabs" role="tablist">
                            <li role="presentation" class="active"><a href="#comercial" aria-controls="comercial" role="tab"
                                    data-toggle="tab" (click)="getActiveComercial()">Comercial</a></li>
                            <li role="presentation"><a href="#cartera" aria-controls="cartera" role="tab" data-toggle="tab"
                                    (click)="getActiveSaleCollect()">Cartera</a></li>
                            <li role="presentation"><a href="#logistica" aria-controls="logistica" role="tab"
                                    data-toggle="tab" (click)="getActiveLogistica()">Logística</a></li>
                            <!-- <li role="presentation"><a href="#finanzas" aria-controls="finanzas" role="tab" data-toggle="tab">Finanzas</a></li> -->
                        </ul>
                        <!-- Tab panel -->
                        <div class="tab-content">
                            <div role="tabpanel" class="tab-pane active" id="comercial">
                                <div class="row">
                                    <div class="col-xs-12">
                                        <div class="list-group text-center" id="list-tab" role="tablist">
                                            <a class="list-group-item list-group-item-action" [ngClass]="{active: activeSaleAnnual}"
                                                id="list-anual-list" data-toggle="list" role="tab" style="border-radius: 0px;"
                                                (click)="getActiveSaleAnnual()">Ventas
                                                Anuales</a>
                                            <a class="list-group-item list-group-item-action" [ngClass]="{active: activeSaleMonth}"
                                                id="list-mensual-list" data-toggle="list" role="tab" style="border-radius: 0px;"
                                                (click)="getActiveSaleMonth()">Ventas
                                                Mensuales</a>
                                            <a class="list-group-item list-group-item-action" [ngClass]="{active: activeMargeAnnual}"
                                                id="list-marg-Anual-list" data-toggle="list" role="tab" style="border-radius: 0px;"
                                                (click)="getActiveMargeAnnual()">Margen
                                                Anual</a>
                                            <a class="list-group-item list-group-item-action" [ngClass]="{active: activeMargeMonth}"
                                                id="list-marg-mensual-list" data-toggle="list" role="tab" style="border-radius: 0px;"
                                                (click)="getActiveMargeMonth()">Margen
                                                Mensual</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- <div role="tabpanel" class="tab-pane" id="finanzas">
                                <div class="row">
                                    <div class="col-xs-10 col-xs-offset-1">
                                        <div class="jumbotron">
                                            <div class="container">
                                                <p>Lo sentimos. Esta en desarrollo.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div> -->
                            <div role="tabpanel" class="tab-pane" id="cartera">
                                <div class="row">
                                    <div class="col-xs-12">
                                        <div class="list-group text-center" id="list-tab" role="tablist">
                                            <a class="list-group-item list-group-item-action" [ngClass]="{active: activeCollection}"
                                                id="list-recaudo-list" data-toggle="list" role="tab" style="border-radius: 0px;"
                                                (click)="getCollectMonthly()">Recaudado</a>
                                            <a class="list-group-item list-group-item-action" [ngClass]="{active: activeByCollection}"
                                                id="list-sin-recaudar-list" data-toggle="list" role="tab" style="border-radius: 0px;"
                                                (click)="getByCollect()">Por cobrar</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div role="tabpanel" class="tab-pane" id="logistica">
                                <div class="row">
                                    <div class="col-xs-12">
                                        <div class="list-group text-center" id="list-tab" role="tablist">
                                            <a class="list-group-item list-group-item-action" [ngClass]="{active: activeStatusOrder}"
                                                id="list-recaudo-list" data-toggle="list" role="tab" style="border-radius: 0px;"
                                                (click)="getStatusOrder()">Estado Pedidos</a>
                                            <a class="list-group-item list-group-item-action" [ngClass]="{active: activeGraphCedi}"
                                                id="list-cedi-list" data-toggle="list" role="tab" style="border-radius: 0px;"
                                                (click)="getOrdersCedi()">Bodega General</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--Gráficas gerencia -->
    <div class="container content" *ngIf="activeContentGerencia">
        <!--ventas anuales-->
        <div class="row" *ngIf="activeSaleAnnual">
            <div class="col-xs-12">
                <div class="margin-20">
                    <div style="display: block">
                        <canvas id="ventasAnuales" baseChart [datasets]="barChartDataComercYear" [labels]="barChartLabelsComercYear"
                            [legend]="'false'" [chartType]="barChartTypeComercYear" [colors]="'#1be4bf'"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 col-md-8 col-md-offset-2">
                <table style="border: solid 1px; width: 100%; border-color: #828282;">
                    <tr>
                        <td style="border: solid 1px; border-color: #333; width: 50%; background-color: #333; color: #fff;">
                            <h4>Año</h4>
                        </td>
                        <td style="border: solid 1px; border-color: #333; width: 50%; background-color: #333; color: #fff;">
                            <h4>Ventas</h4>
                        </td>
                    </tr>
                    <tr *ngFor="let venta of ventasAnuales">
                        <td style="border: solid 1px; border-color: #828282; width: 50%;">
                            {{venta.year}}
                        </td>
                        <td style="border: solid 1px; border-color: #828282; width: 50%;">
                            $ {{venta.totalSale | number}}
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <!--ventas mensuales-->
        <div class="row" *ngIf="activeSaleMonth">
            <div class="col-xs-12">
                <div class="margin-20">
                    <div style="display: block">
                        <canvas id="ventasMensuales" baseChart [datasets]="barChartDataComercMonth" [labels]="barChartLabelsComercMonth"
                            [legend]="'false'" [chartType]="barChartTypeComercMonth" [colors]="'#1be4bf'"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 col-md-8 col-md-offset-2">
                <h4 class="text-center">Año: {{year}}</h4>
                <table style="border: solid 1px; width: 100%; border-color: #828282;">
                    <tr>
                        <td style="border: solid 1px; border-color: #333; width: 50%; background-color: #333; color: #fff;">
                            <h4>Mes</h4>
                        </td>
                        <td style="border: solid 1px; border-color: #333; width: 50%; background-color: #333; color: #fff;">
                            <h4>Ventas</h4>
                        </td>
                    </tr>
                    <tr *ngFor="let venta of ventasMensuales">
                        <td style="border: solid 1px; border-color: #828282; width: 50%;">
                            {{venta.month}}
                        </td>
                        <td style="border: solid 1px; border-color: #828282; width: 50%;">
                            $ {{venta.totalSale | number}}
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <!--margen anual-->
        <div class="row" *ngIf="activeMargeAnnual">
            <div class="col-xs-12">
                <div class="margin-20">
                    <div style="display: block">
                        <canvas baseChart [datasets]="barChartDataComercMargeAnnual" [labels]="barChartLabelsComercMargeAnnual"
                            [chartType]="barChartTypeComercMargeAnnual" [colors]="'#1be4bf'"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 col-md-8 col-md-offset-2">
                <table style="border: solid 1px; width: 100%; border-color: #828282;">
                    <tr>
                        <td style="border: solid 1px; border-color: #333; width: 50%; background-color: #333; color: #fff;">
                            <h4>Año</h4>
                        </td>
                        <td style="border: solid 1px; border-color: #333; width: 50%; background-color: #333; color: #fff;">
                            <h4>Margen</h4>
                        </td>
                    </tr>
                    <tr *ngFor="let venta of ventasAnuales">
                        <td style="border: solid 1px; border-color: #828282; width: 50%;">
                            {{venta.year}}
                        </td>
                        <td style="border: solid 1px; border-color: #828282; width: 50%;">
                            % {{venta.margeSale | number}}
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <!--margen mensual-->
        <div class="row" *ngIf="activeMargeMonth">
            <div class="col-xs-12">
                <div class="margin-20">
                    <div style="display: block">
                        <canvas baseChart [datasets]="barChartDataComercMargeMonth" [labels]="barChartLabelsComercMargeMonth"
                            [chartType]="barChartTypeComercMargeMonth" [colors]="'#1be4bf'"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 col-md-8 col-md-offset-2">
                <table style="border: solid 1px; width: 100%; border-color: hsl(0, 32%, 8%);">
                    <tr>
                        <td style="border: solid 1px; border-color: #333; width: 50%; background-color: #333; color: #fff;">
                            <h4>Mes</h4>
                        </td>
                        <td style="border: solid 1px; border-color: #333; width: 50%; background-color: #333; color: #fff;">
                            <h4>Margen</h4>
                        </td>
                    </tr>
                    <tr *ngFor="let venta of ventasMensuales">
                        <td style="border: solid 1px; border-color: #828282; width: 50%;">
                            {{venta.month}}
                        </td>
                        <td style="border: solid 1px; border-color: #828282; width: 50%;">
                            % {{venta.margeSale | number}}
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <hr>
    </div>
</div>
<br />
<!-- Cartera -->
<div class="cartera" *ngIf="activeContentCartera">
    <div class="container">
        <!--recaudado-->
        <div class="row" *ngIf="activeCollection">
            <div class="col-xs-12 col-md-10 col-md-offset-1">
                <h4 class="text-center" style="padding: 10px ;border: solid 1px; border-color: #333; background-color: #333; color: #fff;">{{year}}</h4>
                <!-- Tabla Desktop -->
                <table class="table table-sm visible-lg visible-md" style="border-collapse: initial !important;">
                    <thead>
                        <tr>
                            <th scope="col" style="border-bottom: 0px;">Mes</th>
                            <th scope="col" style="border-bottom: 0px;">Sin Vencer</th>
                            <th scope="col" style="border-bottom: 0px;">0 a 20</th>
                            <th scope="col" style="border-bottom: 0px;">21 a 55</th>
                            <th scope="col" style="border-bottom: 0px;">56 a 120</th>
                            <th scope="col" style="border-bottom: 0px;">121 a 360</th>
                            <th scope="col" style="border-bottom: 0px;">Mayor de 360</th>
                            <th scope="col" style="border-bottom: 0px;">SubTotal</th>
                        </tr>
                    </thead>
                    <tbody *ngFor="let recaudo of recaudos">
                        <tr>
                            <td>{{recaudo[1]}}</td>
                            <td>$ {{recaudo[2] | number}}</td>
                            <td>$ {{recaudo[3] | number}}</td>
                            <td>$ {{recaudo[4] | number}}</td>
                            <td>$ {{recaudo[5] | number}}</td>
                            <td>$ {{recaudo[6] | number}}</td>
                            <td>$ {{recaudo[7] | number}}</td>
                            <td>$ {{recaudo[2] + recaudo[3] + recaudo[4] + recaudo[5] + recaudo[6] + recaudo[7] | number}}</td>
                        </tr>
                    </tbody>
                    <tfoot style="padding: 10px ;border: solid 1px; border-color: #333; background-color: #333; color: #fff;">
                        <tr>
                            <th scope="col" style="border-bottom: 0px;">Totales</th>
                            <td scope="col" style="border-bottom: 0px;">$ {{totalSinVencer | number}}</td>
                            <td scope="col" style="border-bottom: 0px;">$ {{total0a20 | number}}</td>
                            <td scope="col" style="border-bottom: 0px;">$ {{total21a55 | number}}</td>
                            <td scope="col" style="border-bottom: 0px;">$ {{total56a120 | number}}</td>
                            <td scope="col" style="border-bottom: 0px;">$ {{total121a360 | number}}</td>
                            <td scope="col" style="border-bottom: 0px;">$ {{totalMayor360 | number}}</td>
                            <td scope="col" style="border-bottom: 0px;">$ {{totalSinVencer + total0a20 + total21a55 + total56a120 + total121a360 + totalMayor360 | number}}</td>
                        </tr>
                    </tfoot>
                </table>
                <!-- tabla mobile -->
                <table class="table table-sm visible-sm visible-xs" style="border-collapse: initial !important;">
                    <thead>
                        <tr>
                            <th scope="col">Mes</th>
                            <th>
                                <select id="diasAtraso" class="form-control input-md" [(ngModel)]="selectedDiasAtraso">
                                    <option value="a" style="border-bottom: 0px;">Sin Vencer</option>
                                    <option value="b" style="border-bottom: 0px;">0 a 20</option>
                                    <option value="c" style="border-bottom: 0px;">21 a 55</option>
                                    <option value="d" style="border-bottom: 0px;">56 a 120</option>
                                    <option value="e" style="border-bottom: 0px;">121 a 360</option>
                                    <option value="f" style="border-bottom: 0px;">Mayor de 360</option>
                                </select>
                            </th>
                        </tr>
                    </thead>
                    <tbody *ngFor="let recaudo of recaudos">
                        <tr>
                            <td>{{recaudo[1]}}</td>
                            <td *ngIf="selectedDiasAtraso == 'a'">$ {{recaudo[2] | number}}</td>
                            <td *ngIf="selectedDiasAtraso == 'b'">$ {{recaudo[3] | number}}</td>
                            <td *ngIf="selectedDiasAtraso == 'c'">$ {{recaudo[4] | number}}</td>
                            <td *ngIf="selectedDiasAtraso == 'd'">$ {{recaudo[5] | number}}</td>
                            <td *ngIf="selectedDiasAtraso == 'e'">$ {{recaudo[6] | number}}</td>
                            <td *ngIf="selectedDiasAtraso == 'f'">$ {{recaudo[7] | number}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!--Por cobrar-->
        <div class="row" *ngIf="activeByCollection">
            <div class="col-xs-12 col-md-10 col-md-offset-1">
                <h4 class="text-center" style="padding: 10px ;border: solid 1px; border-color: #333; background-color: #333; color: #fff;">{{year}}</h4>
                <!-- Tabla Desktop -->
                <table class="table table-sm visible-lg visible-md visible-sm visible-xs" style="border-collapse: initial !important;">
                    <tbody *ngFor="let cobrar of byCollect">
                        <tr>
                            <td>{{cobrar.concept}}</td>
                            <td>$ {{cobrar.subtotal | number}}</td>
                            <td>{{cobrar.porcent | number}} %</td>
                        </tr>
                    </tbody>
                </table>
                <div class="row">
                    <div class="col-xs-12">
                        <h4 class="text-center" style="padding: 10px ;border: solid 1px; border-color: #333; background-color: #333; color: #fff;">Total</h4>
                        <h4 class="text-center">{{totalByCollect | number}}</h4>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <h4 class="text-center" style="padding: 10px ;border: solid 1px; border-color: #333; background-color: #333; color: #fff;">Cartera
                            Sana</h4>
                            <div class="col-xs-6">
                                <h4 class="text-center">{{totalCarteraSana | number}}</h4>
                            </div>
                            <div class="col-xs-6">
                                <h4 class="text-center">{{porcentCarteraSana | number}} %</h4>
                            </div>
                        <hr />
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Logistica -->
<div class="cartera" *ngIf="activeContentLogist">
    <div class="container">
        <!--Estado Pedidos-->
        <div class="row" *ngIf="activeStatusOrder">
            <div class="col-xs-12 col-md-10 col-md-offset-1">
                <h4 class="text-center" style="padding: 10px ;border: solid 1px; border-color: #333; background-color: #333; color: #fff;">{{monthName}}</h4>
                <table class="table table-sm" style="border-collapse: initial !important;">
                    <thead>
                        <tr>
                            <th scope="col" style="border-bottom: 0px;">Estado</th>
                            <th scope="col" style="border-bottom: 0px;">Pedidos</th>
                            <th scope="col" style="border-bottom: 0px;">Total</th>
                        </tr>
                    </thead>
                    <tbody *ngFor="let order of statusOrders">
                        <tr>
                            <td>{{order.status}}</td>
                            <td>{{order.orderNumber}}</td>
                            <td>$ {{order.totalPend | number}}</td>
                        </tr>
                    </tbody>
                </table>
                <div class="row">
                    <div class="col-xs-12">
                        <h4 class="text-center" style="padding: 10px ;border: solid 1px; border-color: #333; background-color: #333; color: #fff;">Total
                            Pendiente</h4>
                        <h4 class="text-center">{{totalPend | number}}</h4>
                        <hr />
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <h4 class="text-center" style="padding: 10px ;border: solid 1px; border-color: #333; background-color: #333; color: #fff;">Total
                            Pedido</h4>
                        <h4 class="text-center">{{totalOrder | number}}</h4>
                        <hr />
                    </div>
                    <div class="col-sm-6">
                        <h4 class="text-center" style="padding: 10px ;border: solid 1px; border-color: #333; background-color: #333; color: #fff;">Total
                            Facturado</h4>
                        <h4 class="text-center">{{totalInvoice | number}}</h4>
                        <hr />
                    </div>
                </div>
            </div>
        </div>
        <!--Order Cedi-->
        <div class="row" *ngIf="activeGraphCedi">
            <div class="col-xs-12">
                <div class="margin-20">
                    <div style="display: block">
                        <canvas baseChart [data]="doughnutChartData" [labels]="doughnutChartLabels" [chartType]="doughnutChartType"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Finanzas -->
<!-- <div class="finanzas">
    <h3>Finanzas</h3>
</div> -->