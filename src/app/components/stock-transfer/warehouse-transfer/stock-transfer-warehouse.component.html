<igb-navbar></igb-navbar>

<div class="container content">
    <h3>Transferencia entre almacenes</h3>
    <div class="row" *ngIf="stockTransferErrorMessage">
        <div class="col-xs-12">
            <div class="alert alert-danger">
                {{stockTransferErrorMessage}}
            </div>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-xs-12">
            <label for="warehouse">Almacén Origen*</label>
            <select id="warehouse" class="form-control input-lg" [(ngModel)]="selectedWarehouseFrom" name="selectedWarehouseFrom"
                (change)="updateWarehouseFrom()" disabled="{{disabledWhFrom}}">
                <option value="" disabled>Seleccione uno</option>
                <option *ngFor="let warehouse of warehousesFrom" value="{{warehouse.whsCode}}">({{warehouse.whsCode}})
                    {{warehouse.whsName}}</option>
            </select>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-xs-12">
            <label for="warehouse">Almacén Destino*</label>
            <select id="warehouse" class="form-control input-lg" [(ngModel)]="selectedWarehouseTo" name="selectedWarehouseTo">
                <option value="" disabled>Seleccione uno</option>
                <option *ngFor="let warehouse of warehousesTo" value="{{warehouse.whsCode}}">({{warehouse.whsCode}})
                    {{warehouse.whsName}}</option>
            </select>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-xs-8">
            <form (submit)="validarReferencia()">
                <label for="itemCode">Referencia*</label>
                <input type="text" class="form-control input-lg" autocomplete="off" id="itemCode" name="itemCode"
                    placeholder="escanea la referencia" [(ngModel)]="itemCode" (blur)="validarReferencia()">
            </form>
        </div>
        <div class="col-xs-4">
            <form (submit)="agregarReferencia()">
                <label for="quantity">Cant</label>
                <input type="number" class="form-control input-lg" autocomplete="off" id="quantity" name="quantity"
                    [(ngModel)]="quantity">
            </form>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-xs-6">
            <button class="btn btn-default btn-lg send" type="button" (click)="crearTraslado()" style="display: none">
                Finalizar <span class="icon-send"></span>
            </button>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-xs-12">
            <table *ngIf="items.length > 0" class="table table-striped">
                <tr>
                    <th class="detail"></th>
                    <th class="detail">Referencia</th>
                    <th class="detail">Origen</th>
                    <th class="detail">Destino</th>
                    <th class="detail">Cantidad</th>
                </tr>
                <tr *ngFor="let item of items">
                    <td style="width: 10%;"><img src="{{urlShared}}mtz/{{item.itemCode}}.jpg" style="width: 100%;"></td>
                    <td class="detail">{{item.itemCode}}</td>
                    <td class="detail">{{item.fromWhsCode}}</td>
                    <td class="detail">{{item.whsCode}}</td>
                    <td class="detail">{{item.quantity}}</td>
                </tr>
            </table>
        </div>
    </div>
</div>